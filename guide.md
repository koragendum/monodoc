# Monodoc

This file can be regenerated by running

```
./monodoc guide.md
```

## Table of Contents

|0> [Introduction](#introduction)
|0> [Block-level Elements](#block-level-elements)
|1>   [Headings](#headings)
|1>   [Paragraphs](#paragraphs)
|1>   [Block Quotes](#block-quotes)
|1>   [Lists](#lists)
|1>   [Tables](#tables)
|1>   [Code Blocks](#code-blocks)
|1>   [Spacing](#spacing)
|0> [Inline Elements](#inline-elements)
|1>   [Escape Sequences](#escape-sequences)
|1>   [Hyperlinks and Anchors](#hyperlinks-and-anchors)
|1>   [Variables](#variables)
|1>   [Superscripts and Subscripts](#superscripts-and-subscripts)
|1>   [Abbreviations](#abbreviations)
|1>   [Small Caps](#small-caps)
|1>   [Italic and Bold](#italic-and-bold)
|0> [CSS Classes](#css-classes)

## {#introduction} [#](#introduction) Introduction

A markdown page or fragment is first broken into block-level elements which
are then individually rendered and then concatenated.

You can mix markdown and {!html}, since the markdown parser preserves {!html}
tags.

Monodoc uses U+F000 through U+F009 internally to mark locations as it
manipulates text, so unfortunately your document can’t use these scalar values.

## {#block-level-elements} [#](#block-level-elements) Block-level Elements

### {#headings} [#](#headings) Headings

Lines that start with one or more `#` followed by a space are headings. The
number of `#` indicates the heading level.

### {#paragraphs} [#](#paragraphs) Paragraphs

Anything that’s not one of the other block-level elements is a paragraph.
A paragraph is ended by an empty line, the start of another block-level element,
or (if you’re mixing markdown and {!html}) one of the following {!html} tags:

|1> `h1 h2 h3 h4 h5 h6 div p pre ol ul table`

Within paragraphs (but not the other block-level elements) you can indent lines
using <span style="display: inline-block;">`|`@n`\>`</span>, where @n indicates
how far to indent the line.

<div class="src">
```
For any line in a paragraph,
|1&gt; if the line begins with `|1&#x5C;&gt;` it’s indented once;
  |2&gt; if `|2&#x5C;&gt;` then it’s indented twice
|2&gt; (regardless of the indentation in the source);
|0&gt; and so on for `|`@n`&#x5C;&gt;` from @n = 0 up to @n = 9.
```
</div>
<div class="fmt">
For any line,
|1> if the line begins with `|1\>` it’s indented once;
  |2> if `|2\>` then it’s indented twice
|2> (regardless of the indentation in the source);
|0> and so on for `|`@n`\>` from @n = 0 up to @n = 9.
</div>

### {#block-quotes} [#](#block-quotes) Block Quotes

Lines that start with `\>` are enclosed by `\<div class="quote"\>` and
`\</div\>` tags.

<div class="src">
```
A block quote ends the previous item and
&gt; begins a section set in a `div` element.
&gt;
&gt; It can include multiple paragraphs
&gt; &gt; and even nest.
&gt;
&gt; You can also include code blocks,
&gt; &grave;&grave;&grave;
&gt; like
&gt;   so&lt;i&gt;!&lt;/i&gt;
&gt; &grave;&grave;&grave;
```
</div>
<div class="fmt">
A block quote ends the previous item and
> begins a section set in a `div` element.
>
> It can include multiple paragraphs
> > and even nest.
>
> You can also include code blocks,
> ```
> like
>   so<i>!</i>
> ```
</div>

### {#lists} [#](#lists) Lists

Lines that start with `*`, `-`, or `+` followed by a space are list items.
When a list is invalid (because of mismatching bullets or mismatched
indentation), the list is printed as a code block.

<div class="src">
```
This is an okay list:
- item a
  + with a sub-item
- item b

- item c

This is also okay:
* item d
  - with a sub-item
     - with a sub-sub-item

But this is broken:
- item e
* item f

And so is this:
  - item g
- item h

And this:
- item i
    - item j
  - item k
```
</div>
<div class="fmt">
This is an okay list:
- item a
  + with a sub-item
- item b

- item c

This is also okay:
* item d
  - with a sub-item
     - with a sub-sub-item

But this is broken:
- item e
* item f

And so is this:
  - item g
- item h

And this:
- item i
    - item j
  - item k
</div>

### {#tables} [#](#tables) Tables

Lines that start with `|` are table rows, and `|` is used to further separate
cells in the row. Tables can optionally have a row that indicates column
alignment, and if they have an alignment row, they can also optionally have
a header. When a table is invalid (because the rows don’t have the same number
of columns or there are multiple alignment or header rows), the table is printed
as a code block.

<div class="src">
```
This table is okay:
| this   | is    | a |
| simple | table |   |

And so are these:

|:--------|:----------:| ----------: | ---       |
| in this | example we | specify the | alignment |
| _left_ | _center_ | _right_ | _default_ (left) |
| note | we don’t | have to | line up \\|s in the source |
| (but it’s ||| nice to do so)|

|               | Column 1    | Column 2       |
|---------------|-------------|----------------|
| we can        | also add    | column headers |
| (there aren’t | row headers | but we _could_ |
| **use bold**  | if we       | wanted)        |

But these are broken:

| 1 | 2 | 3 |
| 4 | 5 | 6 | 7 |

| a | b | c |
|---|:-:|---|
| g | h | i |
|---|:-:|---|

| a | b | c |
| d | e | f |
|---|---|---|
| g | h | i |
```
</div>
<div class="fmt">
This table is okay:
| this   | is    | a |
| simple | table |   |

And so are these:

|:--------|:----------:| ----------: | ---       |
| in this | example we | specify the | alignment |
| _left_ | _center_ | _right_ | _default_ (left) |
| note | we don’t | have to | line up \|s in the source |
| (but it’s ||| nice to do so)|

|               | Column 1    | Column 2       |
|---------------|-------------|----------------|
| we can        | also add    | column headers |
| (there aren’t | row headers | but we _could_ |
| **use bold**  | if we       | wanted)        |

But these are broken:

| 1 | 2 | 3 |
| 4 | 5 | 6 | 7 |

| a | b | c |
|---|:-:|---|
| g | h | i |
|---|:-:|---|

| a | b | c |
| d | e | f |
|---|---|---|
| g | h | i |
</div>

### {#code-blocks} [#](#code-blocks) Code Blocks

Code blocks start and end with <code>\`\`\`</code>, which can appear at the
start of a line or within a paragraph.

If a code block begins with <code>\`\`\`xxx\\n</code>, then `xxx` is taken to
be the name of the language (for syntax highlighting, for example).

<div class="src">
```
A code block can begin at the start of a line
&grave;&grave;&grave;
like so
  (note that whitespace is respected)
&grave;&grave;&grave;

or it can be written in &grave;&grave;&grave;the middle&grave;&grave;&grave; of a paragraph.

&grave;&grave;&grave;markdown
(Note that, currently, monodoc itself
  doesn’t do any syntax highlighting.)
&grave;&grave;&grave;
```
</div><div class="fmt">
A code block can begin at the start of a line
```
like so
  (note that whitespace is respected)
```

or it can be written in ```the middle``` of a paragraph.

```markdown
(Note that, currently, monodoc itself
  doesn’t do any syntax highlighting.)
```
</div>

### {#spacing} [#](#spacing) Spacing

Empty lines add space between block-level elements.

<div class="src">
```
There will be space after this paragraph before the list.

- item a
- item b

There won’t be space after _this_ paragraph, however,
- item c
- item d

There won’t be space after this paragraph
- item e
- item f
*or* after the list (before this paragraph).
```
</div>
<div class="fmt">
There will be additional space after this paragraph before the list.

- item a
- item b

There won’t be space after _this_ paragraph, however,
- item c
- item d

There won’t be space after this paragraph
- item e
- item f
_or_ after the list (before this paragraph).
</div>

## {#inline-elements} [#](#inline-elements) Inline Elements

These can be used in every block-level element besides code blocks.
Each heading, paragraph, list item, and table cell is rendered separately.

### {#escape-sequences} [#](#escape-sequences) Escape Sequences

If you need a literal
|1> `\\ \< \> \& \# \` \_ \*`
in a place where it’d be interpreted as markdown or {!html} syntax, you can
escape the character by typing a backslash first:
|1> `\\\\ \\\< \\\> \\\& \\\# \\\` \\\_ \\\*`

(You could also write `\&lt;` or `\&#x3C;` instead of `\\\<`. The backslash
sequences are provided for convenience.)

### {#inline-code} [#](#inline-code) Inline Code

Text between pairs of `\`` is rendered as inline code.

<div class="src">
```
Inline code is set in a `fixed-width` face.

{!Html} tags are not escaped automatically;
|1&gt; `the middle &lt;i&gt;words of&lt;/i&gt; this line`
are rendered in italic using `\&lt;i\&gt;`.
```
</div>
<div class="fmt">
Inline code is set in a `fixed-width` face.

{!Html} tags are not escaped automatically;
|1> `the middle <i>words of</i> this line`
are rendered in italic using `\<i\>`.
</div>

### {#hyperlinks-and-anchors} [#](#hyperlinks-and-anchors) Hyperlinks and Anchors

Links can be created by typing

|1> `[` @displayed `](` @target `)`

where @displayed is the text that’s shown for the link and @target is the
destination.

The target can be anything that the `href` attribute of an `\<a\>` tag can be.
For example,
- it can be an entire URL (like `https://site.com`),
- a relative path (like `../page.html`), or
- an anchor on the current page (like [`#label`](#label)).

Markdown syntax can be used within @displayed (which is how the link above is
set in a fixed-width face).

Anchors marking a particular location on the page can be created with

|1> `{#` @label `}`

where @label is the name or {!id}. Only letters, numbers, and the characters
|1> `\_ + -`
are allowed in @label. Although it cannot _contain_ whitespace, there may
whitespace before or after.

Anchors themselves are not visible by default (they are empty `span` elements).

<div class="src">
```
{#label} The start of this paragraph has an anchor, and there’s also
an anchor {# here } at this start of this phrase.

The anchor {# bad anchor } here though is malformed.
```
</div>
<div class="fmt">
{#label} The start of this paragraph has an anchor, and there’s also
an anchor {# here } at this start of this phrase.

The anchor {# bad anchor } here though is malformed.
</div>

### {#variables} [#](#variables) Variables

A letter or word can be marked as a variable by writing `@` before the letter
or word. Variable names can only consist of upper- and lowercase letters.

Extra space is selectively placed around delimiters when they are adjacent to
variables under the assumption that variables are set in a typical italic face.

<div class="src">
```
For @i = 0, 1, ..., @n\-1,
|1> @x = @inp[@i]
|1> @x = @f(@x)
|1> @out[@i] <- encode[@x],
where @inp is a byte array (of length @n),
@f is an arbitrary function from byte to byte,
and “encode” is a byte array of length 256.

The righthand side of *i* is cramped in [*i*] _vs_ in [@i];
&lt;br&gt;also compare [*j*] _vs_ [@j] and *f*(*x*) _vs_ @f(@x).
```
</div>
<div class="fmt">
For @i = 0, 1, ..., @n\-1,
|1> @x = @inp[@i]
|1> @x = @f(@x)
|1> @out[@i] <- encode[@x],
where @inp is a byte array (of length @n),
@f is an arbitrary function from byte to byte,
and “encode” is a byte array of length 256.

The righthand side of *i* is cramped in [*i*] _vs_ in [@i];
<br>also compare [*j*] _vs_ [@j] and *f*(*x*) _vs_ @f(@x).

</div>

### {#superscripts-and-subscripts} [#](#superscripts-and-subscripts) Superscripts and Subscripts

Superscripts and subscripts are written with

|1> `^`@nnn
|1> `\_`@nnn

for one or more digits @nnn or

|1> `^@`@vvv
|1> `\_@`@vvv

for some variable @vvv or

|1> `^{` @xxx `}`
|1> `\_{` @xxx `}`

for any @xxx (so long as @xxx doesn’t include braces).

Subscripts can be made smaller by doubling the underscore.

<div class="src">
```
@x_1, ..., @x_{@n\-1}, @x_@n are all of type `usize`,
and the maximum value of `usize` is 2^64 &amp;minus; 1.
```
</div>
<div class="fmt">
@x_1, ..., @x_{@n\-1}, @x_@n are all of type `usize`,
and the maximum value of `usize` is 2^64 &minus; 1.
</div>

### {#abbreviations} [#](#abbreviations) Abbreviations

There are a few abbreviations provided for convenience:

| Text  | Replacement |                          |
|:-----:|:-----------:|:-------------------------|
| `>=`  | >=          | greater-than or equal to |
| `<=`  | <=          | less-than or equal to    |
| `!=`  | !=          | not equal to             |
| `->`  | ->          | right arrow              |
| `<-`  | <-          | left arrow               |
| `\x`  | \x          | multiplication sign      |
| `\-`  | \-          | minus sign               |
| `--`  | --          | en dash                  |
| `---` | ---         | em dash                  |
| `...` | ...         | ellipsis                 |
| `\~`  | \~          | raised ellipsis          |

When `-` occurs within a word (specifically, whenever it is _not_ preceded by
whitespace), it’s left as U+002D {!hyphen-minus}, since it is assumed to be
functioning as a hyphen.

However, when a `-` is preceded by whitespace
- and it’s also followed by whitespace, the `-` is converted to an en dash.
- and it’s _not_ followed by whitespace, the `-` is converted to a minus sign.

For example,

| Source                | Rendered            |                             |
|:----------------------|:--------------------|:----------------------------|
| `in between - and so` | in between - and so | hyphen converted to en dash |
| `the value is -1`     | the value is -1     | hyphen converted to minus   |

However, **it’s best to use `\\-` or `\&minus;` whenever you intend to write
a minus sign**, since it’s impossible to determine when to use a minus without
semantic information. For example, the syntactic heuristic will completely fail
in cases like

| Source   | Rendered |                                                    |
|:---------|:--------:|:---------------------------------------------------|
| `@x-1`   | @x-1     | hyphen is not converted to minus sign              |
| `@n - 1` | @n - 1   | hyphen converted to en dash rather than minus sign |

You should instead write

|:----------|:-------:|
| `@x\\-1`  | @x\-1   |
| `@n \- 1` | @n \- 1 |

or use `\&minus;` or the minus character
(U+2212 {!minus sign}) directly.

### {#small-caps} [#](#small-caps) Small Caps

Text can be set in small capitals using

|1> `{!` @text `}`

where @text doesn’t contain `{` or `}`.

<div class="src">
```
We’re converting markdown to {!html} and {!css}_!_
```
</div>
<div class="fmt">
We’re converting markdown to {!html} and {!css}_!_
</div>


### {#italic-and-bold} [#](#italic-and-bold) Italic and Bold

Text between pairs of `\_` or pairs of `\*` is rendered in italic. Text between
pairs of `\*\*` is rendered in bold.

Italic and bold regions can be nested within each other, and italic regions can
even be nested in themselves one level if different sigils are used.

<div class="src">
```
This is _in italic with **bold** embedded,_
and **this _still works_ vice-versa**.
You can also *nest italic regions _within_ italic regions*.

However, trying to interleave _italic and
**bold like this_ causes things** to break.
```
</div>
<div class="fmt">
This is _in italic with **bold** embedded,_ and **this _still works_
vice-versa**. You can also *nest italic regions _within_ italic regions*.

However, trying to interleave _italic and **bold like this_ causes things**
to break.

</div>

Because `\*` is used for italic and bold, you can’t use `\*` for multiplication;
use × instead. (That character is U+00D7 {!multiplication sign}, which you can
get by writing `\&times;` or `\\x`.) If you need an asterisk for something else,
type `\\\*`.

## {#css-classes} [#](#css-classes) CSS Classes

A few custom {!css} classes are added to some elements, and you probably want
to add styling for these classes somewhere in your style sheets.

For more complete examples, you can look at the style sheet embedded in this
document.

| Class       | Elements   | Example Styling                  |
|:------------|:-----------|:---------------------------------|
| `gap-afore` | `\*`       | `margin-top: 1rem;`              |
| `gap-after` | `\*`       | `margin-bottom: 1rem;`           |
| `quote`     | `div`      | \~                               |
| `sc`        | `span`     | `font-variant-caps: small-caps;` |
| `anchor`    | `span`     | \~                               |
| `small`     | `sub`      | \~                               |
| `var`       | `span`     | `font-style: italic;`            |
| `deitalic`  | `span`     | `font-style: normal;`            |
| `left`      | `th`, `td` | `text-align: left;`              |
| `center`    | `th`, `td` | `text-align: center;`            |
| `right`     | `th`, `td` | `text-align: right;`             |
